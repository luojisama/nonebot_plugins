# NoneBot2 插件合集使用文档

本项目是一个功能丰富的 NoneBot2 插件合集，涵盖了系统管理、社交互动、游戏战绩、AI 分析及日常工具等多个领域。

---

## 🛠️ 核心管理插件

### 1. Web 控制台 (Web Console)
- **插件目录**: `plugin/web_console`
- **功能**: 通过浏览器可视化管理 Bot，查看实时日志，发送群/私聊消息。
- **访问地址**: `http://你的IP:端口/web_console`
- **指令**:
  - `web控制台` / `console` / `控制台`: 获取包含登录码的访问链接（仅限超级用户）。
  - `web密码 [新密码]`: 修改 Web 控制台的登录密码（仅限超级用户）。
- **主要配置**:
  | 配置项 | 类型 | 默认值 | 说明 |
  | :--- | :--- | :--- | :--- |
  | `web_console_password` | `str` | `admin123` | 初始登录密码 |

### 2. Bot 管理 (Bot Manager)
- **插件目录**: `plugin/bot_manager`
- **指令**:
  - `重启`: 重启 Bot 进程（仅限超级用户）。
  - `关闭`: 安全关闭 Bot（仅限超级用户）。
  - `插件列表`: 生成已加载插件的列表图。
  - `商店查询 [关键词]`: 在 NoneBot 商店搜索插件。
  - `安装插件 [插件名]`: 自动安装新插件。
  - `更新插件 [插件名]`: 更新指定插件。
  - `告诉管理员 [内容]`: 向所有超级用户发送私聊消息。

### 3. 账号管理 (Account Manager)
- **插件目录**: `plugin/account_manager`
- **指令 (仅超级用户)**:
  - `/修改昵称 [新昵称]`: 修改 Bot 的 QQ 昵称。
  - `/修改头像 [图片/URL]`: 修改 Bot 的 QQ 头像。
  - `/申请列表`: 查看待处理的好友和群邀请。
  - `/同意 [序号]`: 同意申请。
  - `/拒绝 [序号]`: 拒绝申请。
  - `/发布群消息 [群号] [内容]`: 向指定群发送消息。
  - `/发布说说 [内容]`: 发布 QQ 空间说说。
  - `/更新空间Cookie`: 自动获取并更新空间发布权限。

---

## 🎭 社交与互动插件

### 1. 群聊拟人 (Personification)
- **插件目录**: `plugin/personification`
- **功能**: 基于 AI 的拟人化回复，支持好感度感知、自动水群、戳一戳响应。
- **指令**:
  - `申请白名单`: 申请将当前群加入 AI 回复列表。
  - `群好感` / `群好感度`: 查看当前群对 Bot 的整体好感。
  - `拟人联网 [开启/关闭]`: 切换 AI 是否具备联网搜索能力。
  - `永久拉黑 [@用户]`: 禁止特定用户触发 AI。
  - `添加白名单 [群号]` / `移除白名单 [群号]` (超级用户管理)。
- **主要配置**:
  | 配置项 | 类型 | 默认值 | 说明 |
  | :--- | :--- | :--- | :--- |
  | `personification_api_key` | `str` | (必填) | AI 服务 API Key |
  | `personification_api_url` | `str` | `https://api.openai.com/v1` | API 基础路径 |
  | `personification_model` | `str` | `gpt-4o-mini` | AI 模型名称 |
  | `personification_probability`| `float`| `0.5` | 随机回复概率 (0-1) |

### 2. 签到系统 (Sign-in)
- **插件目录**: `plugin/sign_in`
- **功能**: 包含签到、金币、行动值、好感度、商店及背包系统，基于《别当欧尼酱了》主题。
- **指令**:
  - `签到`: 每日签到，获取随机金币、好感度和行动值。
  - `个人信息` / `查询好感度`: 查看等级、金币、行动值及累计签到。
  - `行动` / `互动`: 消耗行动值与真寻酱互动，增加好感度。
  - `商店` / `绪山商店`: 使用金币购买特制药水、裙子等道具。
  - `购买 [商品ID]`: 购买商店中的指定物品。
  - `背包` / `仓库`: 查看已拥有的道具。
  - `使用 [物品名]`: 使用背包中的道具（如恢复行动值或增加好感）。
  - `排行榜` / `好感度榜`: 查看本群好感度排名。
  - `设置好感度/金币/行动值 [QQ] [数值]` (仅限超级用户)。

### 3. 漂流瓶 (Drift Bottle)
- **插件目录**: `plugin/drift_bottle`
- **指令**:
  - `扔漂流瓶 [内容]`: 投掷一个包含文字/图片的瓶子。
  - `捡漂流瓶`: 随机捞取一个其他用户扔出的瓶子。
  - `查看漂流瓶 [页码]` (管理员): 审查所有瓶子。
  - `删除漂流瓶 [编号]` (管理员): 删除指定瓶子。

### 4. 关键词回复 (Keyword)
- **插件目录**: `plugin/keyword`
- **功能**: 自定义关键词匹配，支持精确和模糊匹配，支持回复文字、图片及 QQ 表情。
- **指令 (仅超级用户)**:
  - `添加关键词 [类型:精确/模糊] [关键词] [回复内容]`: 回复内容可包含多张图片和表情。
  - `查看关键词`: 列出所有已设定的关键词 ID 和规则。
  - `删除关键词 [ID]`: 根据 ID 删除指定回复规则。

---

## 🎮 游戏与战绩查询

### 1. CS2 职业战绩 (CS Pro)
- **插件目录**: `plugin/cs_pro`
- **指令**:
  - `cs查询 [选手名]`: 查询职业选手的详细数据及生涯荣誉。
  - `cs赛事`: 查看当前进行中的职业赛事及实时比分。
  - `5e [ID/昵称/域名]`: 查询 5E 平台玩家战绩卡片。
  - `pw [ID/昵称/SteamID]`: 查询完美世界竞技场战绩。
  - `pwlogin [手机号] [验证码]`: 登录完美世界账号以获取更详细的数据（仅限超级用户）。

### 2. Steam 助手 (Steam Info)
- **插件目录**: `plugin/steam_info`
- **指令**:
  - `steam 状态 [ID/别名]`: 实时状态、在线时长、当前游戏。
  - `steam 最近 [ID/别名]`: 最近两周游戏记录及 AI 锐评。
  - `steam 游戏 [ID/别名]`: 完整游戏库清单及统计。
  - `steam 绑定 [SteamID] [别名]`: 绑定 QQ，之后可直接输入 `steam 状态` 查询。

### 3. 猜歌游戏 (Guess Song)
- **插件目录**: `plugin/guess_song`
- **功能**: 从网易云获取歌词或音频片段进行猜歌，支持点歌和曲库管理。
- **指令**:
  - `猜歌`: 开始游戏（随机歌词/语音）。
  - `猜歌 歌词`: 强制歌词模式。
  - `猜歌 语音`: 强制语音模式。
  - `点歌 [歌名]`: 搜索并发送歌曲语音。
  - `下载歌曲 [歌名]`: 获取歌曲下载链接。
  - `查询歌词 [歌名/ID]`: 查询指定歌曲的完整歌词。
  - `歌曲列表 [范围]`: 查看曲库（例：`1-100`, `all`）。
  - `添加歌曲 [歌名] [歌手]`: 手动录入歌曲。
  - `导入歌曲 [链接/ID]`: 从网易云导入歌曲或整个歌单。
  - `删除歌曲 [歌名]`: 从库中移除歌曲。
  - `猜歌帮助`: 显示详细指令帮助。

### 4. 今日老婆 (Daily Waifu)
- **插件目录**: `plugin/daily_waifu`
- **功能**: 每天随机抽取一位二次元老婆，支持刷新。
- **指令**:
  - `今日老婆` / `抽老婆`: 抽取今日的专属老婆。
  - `刷新老婆` / `换个老婆`: 重新抽取。

---

## 📊 统计与 AI 分析

### 1. 群聊总结 (Zongjie)
- **插件目录**: `plugin/zongjie`
- **指令**: `总结 [数量] [模型]` / `zongjie`
- **功能**: 提取最近聊天记录（默认 150 条），生成包含主要内容、关键结论和重要事项的 Markdown 总结。

### 2. 用户画像 (User Persona)
- **插件目录**: `plugin/user_persona`
- **指令**: `查看画像 [@用户]` / `刷新画像 [@用户]`
- **功能**: 满 70 条发言自动分析用户的职业、年龄、性格及语言风格。

### 3. 成分分析 (User Analysis)
- **插件目录**: `plugin/user_analysis`
- **指令**: `成分分析 [@用户]`
- **功能**: 记录用户言论，通过 AI 深度剖析用户的“成分”与性格特征。

### 4. 群活跃报告 (Group Analytics)
- **插件目录**: `plugin/group_analytics`
- **指令**: `活跃报告 [今日/本周]` / `水群榜` / `活跃榜`
- **功能**: 生成发言频率、时间分布、龙王排行等可视化图表报告。

---

## � 天灾监测
### 1. 地震与台风监测 (Earthquake Monitor)
- **插件目录**: `plugin/earthquake_monitor`
- **功能**: 实时抓取中国地震台网及气象台数据，自动推送地震及台风预警至群聊。
- **指令**:
  - `/地震推送 [开启/关闭/状态]`: 管理本群地震自动推送（限管理员）。
  - `/台风推送 [开启/关闭/状态]`: 管理本群台风自动推送（限管理员）。
  - `/历史地震` / `最近地震`: 获取最近 5 条地震速报。
  - `/当前台风` / `最新台风`: 查看当前活跃台风的动态。
- **主要配置**:
  | 配置项 | 类型 | 默认值 | 说明 |
  | :--- | :--- | :--- | :--- |
  | `earthquake_monitor_interval` | `int` | `60` | 地震检查频率（秒） |
  | `typhoon_monitor_interval` | `int` | `600` | 台风检查频率（秒） |

---

## � 日常工具
### 1. Astro 博客管理 (Astro Blog)
- **插件目录**: `plugin/astroblog`
- **功能**: 通过 GitHub API 管理 Astro 博客，支持文章管理及小事记录（Thoughts）。
- **指令**:
  - `blog list`: 列出所有文章。
  - `blog view [slug]`: 查看文章渲染图。
  - `blog new [标题]`: 交互式创建新文章。
  - `blog update [slug]`: 交互式更新文章内容。
  - `blog del [slug]`: 删除指定文章。
  - `blog thought [内容]`: 记录一件小事（支持图片，自动上传 GitHub）。
  - `blog thoughts`: 查看最近 10 条小事列表。
  - `blog view_thought [文件名]`: 查看小事详情图。
  - `blog help`: 显示博客管理帮助。
- **主要配置**:
  | 配置项 | 类型 | 默认值 | 说明 |
  | :--- | :--- | :--- | :--- |
  | `github_token` | `str` | (必填) | GitHub Personal Access Token |
  | `github_repo` | `str` | (必填) | 格式为 `用户名/仓库名` |

### 2. B站追番查询 (Bili Bangumi)
- **插件目录**: `plugin/bili_bangumi`
- **功能**: 查询指定 B 站用户的追番列表，生成美观的列表图片。
- **指令**:
  - `追番 [用户名/UID]`: 查询用户的追番记录（前 30 条）。

### 3. 其他实用工具
| 插件 | 指令 | 说明 |
| :--- | :--- | :--- |
| **网页快照** | `/截图 [URL]` / `screenshot` | 将指定网页渲染为全屏长图发送 |
| **LL日程** | `ll日程` / `ll访华` | LoveLive 活动及声优访华日程爬虫 |
| | `ll开启推送` / `ll关闭推送` | (管理员) 开启或关闭本群的日程自动推送 |
| **日常工具箱**| `epic` / `喜加一` | 本周 Epic 免费游戏信息（含封面） |
| | `疯狂星期四` / `kfc` | 随机 KFC 骚话文案 |
| | `冷笑话` / `讲个笑话` | 讲一个冷笑话 |
| | `发病 [@用户]` / `发病文案` | 生成一段针对某人的发病文案 |

---

## ⚙️ 通用配置指南

建议在 `.env` 文件中配置以下通用项以支持 AI 功能：

```env
# AI 核心配置 (拟人、总结、画像等插件会复用此配置)
PERSONIFICATION_API_KEY="sk-xxx"
PERSONIFICATION_API_URL="https://api.openai.com/v1"
PERSONIFICATION_MODEL="gpt-4o-mini"

# Steam 配置
STEAM_API_KEY="你的SteamKey"

# 天灾监测配置
EARTHQUAKE_MONITOR_INTERVAL=60
TYPHOON_MONITOR_INTERVAL=600

# 空间发布配置
QZONE_COOKIE="你的Cookie"
```

> **注意**: 部分插件（如 CS Pro、网页快照）需要环境中安装 `Playwright` 浏览器内核。如果无法运行，请执行 `playwright install chromium`。
