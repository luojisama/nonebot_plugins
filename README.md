# NoneBot2 插件合集使用文档

本项目是一个功能丰富的 NoneBot2 插件合集，涵盖了系统管理、社交互动、游戏战绩、AI 分析及日常工具等多个领域。

---

## 🛠️ 核心管理插件

### 1. Web 控制台 (Web Console)
- **插件目录**: `plugin/web_console`
- **功能**: 通过浏览器可视化管理 Bot，查看实时日志，发送群/私聊消息。
- **访问地址**: `http://你的IP:端口/web_console`
- **指令**:
  - `web控制台` / `console` / `控制台`: 获取包含登录码的访问链接（仅限超级用户）。
  - `web密码 [新密码]`: 修改 Web 控制台的登录密码（仅限超级用户）。
- **主要配置**:
  | 配置项 | 类型 | 默认值 | 说明 |
  | :--- | :--- | :--- | :--- |
  | `web_console_password` | `str` | `admin123` | 初始登录密码 |

### 2. Bot 管理 (Bot Manager)
- **插件目录**: `plugin/bot_manager`
- **指令**:
  - `重启`: 重启 Bot 进程。
  - `关闭`: 安全关闭 Bot。
  - `插件列表`: 列出当前所有已加载的插件。
  - `商店查询 [关键词]`: 在 NoneBot 商店搜索插件。
  - `安装插件 [插件名]`: 自动安装新插件。
  - `更新插件 [插件名]`: 更新指定插件。

### 3. 账号管理 (Account Manager)
- **插件目录**: `plugin/account_manager`
- **指令 (仅超级用户)**:
  - `/修改昵称 [新昵称]`: 修改 Bot 的 QQ 昵称。
  - `/修改头像 [图片/URL]`: 修改 Bot 的 QQ 头像。
  - `/申请列表`: 查看待处理的好友和群邀请。
  - `/同意 [序号]`: 同意申请。
  - `/拒绝 [序号]`: 拒绝申请。
  - `/发布群消息 [群号] [内容]`: 向指定群发送消息。
  - `/发布说说 [内容]`: 发布 QQ 空间说说。
  - `/更新空间Cookie`: 自动获取并更新空间发布权限。

---

## 🎭 社交与互动插件

### 1. 群聊拟人 (Personification)
- **插件目录**: `plugin/personification`
- **功能**: 基于 AI 的拟人化回复，支持好感度感知、自动水群、戳一戳响应。
- **指令**:
  - `申请白名单`: 申请将当前群加入 AI 回复列表。
  - `群好感` / `群好感度`: 查看当前群对 Bot 的整体好感。
  - `拟人联网 [开启/关闭]`: 切换 AI 是否具备联网搜索能力。
  - `永久拉黑 [@用户]`: 禁止特定用户触发 AI。
  - `添加白名单 [群号]` / `移除白名单 [群号]` (超级用户管理)。
- **主要配置**:
  | 配置项 | 类型 | 默认值 | 说明 |
  | :--- | :--- | :--- | :--- |
  | `personification_api_key` | `str` | (必填) | AI 服务 API Key |
  | `personification_api_url` | `str` | `https://api.openai.com/v1` | API 基础路径 |
  | `personification_model` | `str` | `gpt-4o-mini` | AI 模型名称 |
  | `personification_probability`| `float`| `0.5` | 随机回复概率 (0-1) |

### 2. 签到系统 (Sign-in)
- **插件目录**: `plugin/sign_in`
- **功能**: 包含签到、金币、行动值、好感度、商店及背包系统。
- **指令**:
  - `签到`: 每日签到，获取随机金币和好感度。
  - `个人信息` / `查询好感度`: 查看自己的等级、金币和行动值。
  - `行动` / `互动`: 消耗行动值与 Bot 互动，增加好感。
  - `商店` / `绪山商店`: 使用金币购买道具。
  - `背包` / `仓库`: 查看并使用已购买的道具。
  - `排行榜` / `好感度榜`: 查看本群好感度排名。

### 3. 漂流瓶 (Drift Bottle)
- **插件目录**: `plugin/drift_bottle`
- **指令**:
  - `扔漂流瓶 [内容]`: 投掷一个包含文字/图片的瓶子。
  - `捡漂流瓶`: 随机捞取一个其他用户扔出的瓶子。
  - `查看漂流瓶 [页码]` (管理员): 审查所有瓶子。
  - `删除漂流瓶 [编号]` (管理员): 删除指定瓶子。

### 4. 关键词回复 (Keyword)
- **插件目录**: `plugin/keyword`
- **功能**: 自定义关键词匹配，支持精确和模糊匹配。
- **指令 (仅超级用户)**:
  - `添加关键词 [类型:精确/模糊] [关键词] [回复内容]`: 支持图片表情。
  - `查看关键词`: 列出所有已设定的关键词。
  - `删除关键词 [ID]`: 删除指定 ID 的回复规则。

---

## 🎮 游戏与战绩查询

### 1. CS2 职业战绩 (CS Pro)
- **插件目录**: `plugin/cs_pro`
- **指令**:
  - `cs查询 [选手名]`: 查询职业选手（如 s1mple）的详细数据。
  - `cs赛事`: 查看当前进行中的职业赛事。
  - `5e [ID/昵称]`: 5E 平台个人战绩卡片。
  - `pw [ID/昵称]`: 完美世界竞技场个人战绩。

### 2. Steam 助手 (Steam Info)
- **插件目录**: `plugin/steam_info`
- **指令**:
  - `steam 状态 [ID/别名]`: 实时状态、在线时长、当前游戏。
  - `steam 最近 [ID/别名]`: 最近两周游戏记录及 AI 锐评。
  - `steam 游戏 [ID/别名]`: 完整游戏库清单及统计。
  - `steam 绑定 [SteamID] [别名]`: 绑定 QQ，之后可直接输入 `steam 状态` 查询。

### 3. 猜歌游戏 (Guess Song)
- **插件目录**: `plugin/guess_song`
- **指令**:
  - `猜歌`: 随机播放一段歌词或语音片段开始游戏。
  - `点歌 [歌名]`: 搜索并发送网易云音频。
  - `添加歌曲 [歌名] [歌手]` / `导入歌曲 [链接/ID]`: 管理本地库。

---

## 📊 统计与 AI 分析

### 1. 群聊总结 (Zongjie)
- **插件目录**: `plugin/zongjie`
- **指令**: `总结 [数量] [模型]`
- **功能**: 提取最近聊天记录，生成包含主要内容和关键结论的 Markdown 总结。

### 2. 用户画像 (User Persona)
- **插件目录**: `plugin/user_persona`
- **指令**: `查看画像 [@用户]` / `刷新画像 [@用户]`
- **功能**: 满 70 条发言自动分析用户的职业、年龄、性格及语言风格。

### 3. 成分分析 (User Analysis)
- **插件目录**: `plugin/user_analysis`
- **指令**: `成分分析 [@用户]`
- **功能**: 记录用户言论，通过 AI 深度剖析用户的“成分”与性格特征。

### 4. 群活跃报告 (Group Analytics)
- **插件目录**: `plugin/group_analytics`
- **指令**: `活跃报告 [今日/本周]`
- **功能**: 生成发言频率、时间分布、龙王排行等可视化图表报告。

---

## 🌈 日常工具

| 插件 | 指令 | 说明 |
| :--- | :--- | :--- |
| **网页快照** | `/截图 [URL]` | 将指定网页渲染为长图发送 |
| **B站追番** | `追番 [UID/用户名]` | 查询 B 站用户的公开追番列表 |
| **LL日程** | `ll日程` / `ll访华` | LoveLive 活动及声优访华日程爬虫 |
| **日常工具箱**| `epic` | 本周 Epic 免费游戏信息 |
| | `疯狂星期四` | 随机 KFC 骚话文案 |
| | `冷笑话` | 讲一个冷笑话 |
| | `发病 [@用户]` | 生成一段针对某人的发病文案 |
| **博客管理** | `blog list/new/view` | 通过 GitHub 管理 Astro 博客内容 |

---

## ⚙️ 通用配置指南

建议在 `.env` 文件中配置以下通用项以支持 AI 功能：

```env
# AI 核心配置 (拟人、总结、画像等插件会复用此配置)
PERSONIFICATION_API_KEY="sk-xxx"
PERSONIFICATION_API_URL="https://api.openai.com/v1"
PERSONIFICATION_MODEL="gpt-4o-mini"

# Steam 配置
STEAM_API_KEY="你的SteamKey"

# 空间发布配置
QZONE_COOKIE="你的Cookie"
```

> **注意**: 部分插件（如 CS Pro、网页快照）需要环境中安装 `Playwright` 浏览器内核。如果无法运行，请执行 `playwright install chromium`。
